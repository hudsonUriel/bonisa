/*
* Bonisa
* http://github.com/zmdy/bonisa
* MIT Licensed
*
* Copyright (C) 2019 Hudson Uriel Ferreira, http://gihub.com/zmdy
*
* Version: 1.0-alpha
* 23-08-2019
*
* MIN version created with UglifyJS3
*/

var Bonisa=function(){"use strict";var e={version:"1.0-alpha",engines:{reveal:"div.reveal div.slides section",impress:"div#impress div.step"}};const t=e=>new Promise(t=>setTimeout(t,e));function n(e,t,n){var i=new XMLHttpRequest;t=Array.isArray(t)?t:[t],n=Array.isArray(n)?n:[n];try{i.open("GET",e)}catch(e){return console.error(e),console.log("Attempt failed!"),-1}return i.send(),i.onreadystatechange=function(){if(4===i.readyState){var o=e.split(".")[e.split(".").length-1].toLowerCase();for(let e in t)if(o==t[e])try{n[e](i.responseText)}catch(t){console.error(t),console.log(n[e]+" is not a function!");continue}i.responseText}},i}return e.init=function(n){var i,o,r,l,s,a,c,d;if(i=(n="object"==typeof n?n:{configs:n}).file||null,o=n.dir||"./",r=n.engine||n.framework||n.tool||"reveal",l=n.callback||e.createSlide,s=n.delimiter||"---",a=n.options||n.configs||{},c=n.process||function(){},d=n.themes||n.styles||[],!i)return e.error(),-1;e.location=window.location.protocol+"//"+window.location.host+"/"+window.location.pathname.replace("/","").split("/")[0],e.file=i,e.fileFormat=i.split(".")[i.split(".").length-1],e.dir=o,e.delimiter=s,e.engine=e.engines.hasOwnProperty(r)?r:"reveal",e.callback=l,e.structure=e.engines[e.engine],e.config=a,e.process=c,e.styles=Array.isArray(d)?d:[d],e.dependencies=n.dependencies,e.createWait(),e.loadDependencies(),t(500).then(()=>{e.configStructure(),e.openFiles(),e.process(),e.stylize(),e.configEngine()})},e.configEngine=function(){var n,i,o=e.location+"/libs/";n=document.createElement("script"),i=document.createElement("link"),n.src=o+e.engine+"/"+e.engine+".min.js",i.rel="stylesheet",i.type="text/css",i.href=o+e.engine+"/"+e.engine+".min.css",document.body.appendChild(n),document.body.appendChild(i),t(500).then(()=>{switch(e.wait.style.display="none",e.engine){case"reveal":Reveal.initialize(e.config);break;case"impress":impress().init(e.config)}})},e.createSlide=function(t){var n="^";t=function(t){var n,i,o=window.location,r=/^(\u002E{1,2}\u002F|\u002F{1})[^\u002F].{1,}(\u002F|\w{1,})$/gm;o.hostname,o.pathname.replace("/","").split("/")[0];i=t,t=t.split(/( |\u0028|\u0029|\u005B|\u005D|\u007B|\u007D)/);for(let o in t)if(r.test(t[[o]])){n=t[o];var l=e.location+"/"+n.replace(/\u002E+\u002F/g,"");i=i.replace(n,l)}return i}(t);for(let t in e.delimiter)n+="\\u00"+e.delimiter.charCodeAt(t).toString(16);switch(n=RegExp(n,"gm"),t=t.split(n),e.fileFormat){case"md":e.convert=marked;break;case"adoc":e.convert=asciidoctor.convert}for(let n in t){var i=e.slide.cloneNode(!0);i.innerHTML+=e.convert(t[n]),e.slide.parentElement.appendChild(i)}e.slide.parentElement.removeChild(e.slide)},e.configStructure=function(){var t;t=(t=e.structure).split(" ");for(let e in t){var n,i,o=t[e].replace("#","")!=t[e]?"id":"className";i=t[e].replace(/(\u0023|\u002e)/g," ").split(" "),(n=document.createElement(i[0]))[o]=i[1]||"",i=t[e-1]||"body",document.querySelector(i).appendChild(n)}return e.slide=n,n},e.createWait=function(){var t=document.createElement("div");t.innerHTML=e.wait||"<img src='"+e.location+"/media/img/loading.gif' style='width:15vw;margin-left:42.5%;margin-top:32.5vh;margin-bottom:2%;'>\n<p style='text-align: center;'>Loading... please, wait...</p>",t.style.display="inline-block",t.style.visibility="visible",t.style.width="100vw",t.style.height="100vh",document.body.appendChild(t),e.wait=t},e.error=function(){console.log("%cYou've got an error message, don't you? If you did, read this: ","color: #44d; font-weight: bold; font-size: 1.5em;"),console.log("%cHouston, we've got a problem...\n\n%cIt's kind of... impossible to create a presentation without a text file. To configure it do this:\n\n%cBonisa.init({\n\tfile: 'yourFileName.extension',\n\tdir: 'file/directory/location',\n\tengine: 'engine-name'\n});","color: #111; text-transform: uppercase; font-size: 1.25em; font-weight: bold;","color: #111;","color: #44f; font-family: monospace; padding: 2%;"),alert("ERROR: No input file was selected to create the presentation. Open DevTools (F12) to more details ;)")},e.loadDependencies=function(){var t={md:"marked",adoc:"asciidoctor"};e.dependencies=Array.isArray(e.dependencies)?e.dependencies.push(t[e.fileFormat]):[t[e.fileFormat]];for(let t in e.dependencies){var n=document.createElement("script");n.src=e.location+"/libs/"+e.dependencies+"/"+e.dependencies+".min.js",document.head.appendChild(n)}},e.openFiles=function(){var t=Array.isArray(e.file)?e.file:[e.file];for(let i in t)n(e.dir+t,t[i].split(".")[t[i].split(".").length-1],e.callback)},e.stylize=function(){for(let n in e.styles){var t=document.createElement("link");t.rel="stylesheet",t.type="text/css",t.href=e.styles[n]}},e}();